{
  "counts": {
    "total_events": 10
  }
  "entries": [
    {
      "category": "database"
      "commands": [
        {
          "command": "wp db import wp-content/updraft/latest-backup.sql"
          "type": "handler"
        }
      ]
      "description": "Restore MariaDB from most recent UpdraftPlus backup."
      "handler": "wp db import wp-content/updraft/latest-backup.sql"
      "name": "database-restore"
      "notes": "UpdraftPlus stores encrypted backups. Decrypt first if using remote storage."
      "path": "wp-content/updraft/"
      "section": "recovery"
    }
    {
      "category": "database"
      "commands": [
        {
          "command": "wp db import nuj-lcb-backup.sql.gz"
          "type": "undo"
        }
      ]
      "description": "Revert a failed search-replace or URL migration."
      "event": "migration.failure"
      "name": "database-rollback-migration"
      "notes": "Keep pre-migration backup before running fix-urls.php or WP-CLI search-replace."
      "section": "recovery"
      "undo": "wp db import nuj-lcb-backup.sql.gz"
    }
    {
      "category": "dust-events"
      "commands": []
      "name": "deployment-to-dust"
      "notes": "Provenance chain ensures every deployment can be traced and reversed."
      "section": "recovery"
      "source": "infra/provenance.json"
      "transform": "Record each deployment as a reversible dust event with timestamp, commit SHA, and rollback command."
    }
    {
      "category": "full-site"
      "commands": [
        {
          "command": "1. Download latest UpdraftPlus backup from remote storage\n2. Upload via cPanel File Manager to wp-content/updraft/\n3. WordPress admin > UpdraftPlus > Restore (select all components)\n4. If admin inaccessible: manual restore via cPanel phpMyAdmin + File Manager"
          "type": "undo"
        }
      ]
      "description": "Complete site restore from UpdraftPlus backup."
      "event": "site.catastrophic-failure"
      "name": "full-restore"
      "notes": "Test restore procedure monthly. Document remote storage credentials in password manager."
      "section": "recovery"
      "undo": "1. Download latest UpdraftPlus backup from remote storage\n2. Upload via cPanel File Manager to wp-content/updraft/\n3. WordPress admin > UpdraftPlus > Restore (select all components)\n4. If admin inaccessible: manual restore via cPanel phpMyAdmin + File Manager"
    }
    {
      "category": "htaccess"
      "commands": [
        {
          "command": "cp templates/htaccess-well-known .htaccess && wp rewrite flush"
          "type": "rollback"
        }
      ]
      "description": "Restore .htaccess from template if corrupted by plugin."
      "name": "htaccess-recovery"
      "notes": "Plugins (especially caching and security) may corrupt .htaccess. Template is the known-good baseline."
      "path": ".htaccess"
      "rollback": "cp templates/htaccess-well-known .htaccess && wp rewrite flush"
      "section": "recovery"
    }
    {
      "category": "plugins"
      "commands": [
        {
          "command": "wp plugin deactivate --all"
          "type": "undo"
        }
      ]
      "description": "Emergency deactivation of all plugins."
      "event": "site.white-screen"
      "name": "plugin-deactivation"
      "notes": "Reactivate one-by-one to find the culprit. Start with Wordfence, then LiteSpeed Cache."
      "section": "recovery"
      "undo": "wp plugin deactivate --all"
    }
    {
      "category": "plugins"
      "commands": [
        {
          "command": "wp plugin install $PLUGIN_SLUG --version=$PREVIOUS_VERSION --force"
          "type": "rollback"
        }
      ]
      "description": "Rollback a specific plugin to previous version."
      "name": "plugin-rollback"
      "notes": "Check plugin changelog before rolling back. Some downgrades require DB migration."
      "path": "wp-content/plugins/"
      "rollback": "wp plugin install $PLUGIN_SLUG --version=$PREVIOUS_VERSION --force"
      "section": "recovery"
    }
    {
      "category": "theme"
      "commands": [
        {
          "command": "git checkout HEAD~1 -- wp-content/themes/sinople/"
          "type": "rollback"
        }
      ]
      "description": "Roll back Sinople theme to previous version."
      "name": "sinople-rollback"
      "notes": "Activates Newspaperup as fallback if Sinople causes fatal error."
      "path": "wp-content/themes/sinople/"
      "rollback": "git checkout HEAD~1 -- wp-content/themes/sinople/"
      "section": "recovery"
    }
    {
      "category": "theme"
      "commands": [
        {
          "command": "wp theme activate twentytwentyfour"
          "type": "undo"
        }
      ]
      "description": "Switch to safe fallback theme if active theme crashes."
      "event": "theme.crash"
      "name": "theme-fallback-activation"
      "notes": "WordPress core themes are always safe. Re-investigate Sinople before reactivating."
      "section": "recovery"
      "undo": "wp theme activate twentytwentyfour"
    }
    {
      "category": "wp-config"
      "commands": [
        {
          "command": "Apply templates/wp-config-security.php constants manually."
          "type": "rollback"
        }
      ]
      "description": "Restore wp-config.php security constants."
      "name": "wp-config-recovery"
      "notes": "Never automate wp-config.php overwrites â€” contains unique salts and DB credentials."
      "path": "wp-config.php"
      "rollback": "Apply templates/wp-config-security.php constants manually."
      "section": "recovery"
    }
  ]
  "generated_at": "2026-02-17T20:26:53zzz"
  "version": "1"
}